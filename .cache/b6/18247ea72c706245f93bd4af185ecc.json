{"id":"node_modules/turf-tin/index.js","dependencies":[{"name":"C:\\桌面\\new-project\\package.json","includedInParent":true,"mtime":1557726847338},{"name":"C:\\桌面\\new-project\\node_modules\\turf-tin\\package.json","includedInParent":true,"mtime":1557726825584},{"name":"turf-helpers","loc":{"line":4,"column":32},"parent":"C:\\桌面\\new-project\\node_modules\\turf-tin\\index.js","resolved":"C:\\桌面\\new-project\\node_modules\\turf-helpers\\index.js"}],"generated":{"js":"//http://en.wikipedia.org/wiki/Delaunay_triangulation\n//https://github.com/ironwallaby/delaunay\nvar polygon = require('turf-helpers').polygon;\nvar featurecollection = require('turf-helpers').featureCollection;\n\n/**\n * Takes a set of {@link Point|points} and the name of a z-value property and\n * creates a [Triangulated Irregular Network](http://en.wikipedia.org/wiki/Triangulated_irregular_network),\n * or a TIN for short, returned as a collection of Polygons. These are often used\n * for developing elevation contour maps or stepped heat visualizations.\n *\n * This triangulates the points, as well as adds properties called `a`, `b`,\n * and `c` representing the value of the given `propertyName` at each of\n * the points that represent the corners of the triangle.\n *\n * @name tin\n * @param {FeatureCollection<Point>} points input points\n * @param {String=} z name of the property from which to pull z values\n * This is optional: if not given, then there will be no extra data added to the derived triangles.\n * @return {FeatureCollection<Polygon>} TIN output\n * @example\n * // generate some random point data\n * var points = turf.random('points', 30, {\n *   bbox: [50, 30, 70, 50]\n * });\n * //=points\n * // add a random property to each point between 0 and 9\n * for (var i = 0; i < points.features.length; i++) {\n *   points.features[i].properties.z = ~~(Math.random() * 9);\n * }\n * var tin = turf.tin(points, 'z')\n * for (var i = 0; i < tin.features.length; i++) {\n *   var properties  = tin.features[i].properties;\n *   // roughly turn the properties of each\n *   // triangle into a fill color\n *   // so we can visualize the result\n *   properties.fill = '#' + properties.a +\n *     properties.b + properties.c;\n * }\n * //=tin\n */\nmodule.exports = function (points, z) {\n    //break down points\n    return featurecollection(triangulate(points.features.map(function (p) {\n        var point = {\n            x: p.geometry.coordinates[0],\n            y: p.geometry.coordinates[1]\n        };\n        if (z) point.z = p.properties[z];\n        return point;\n    })).map(function (triangle) {\n        return polygon([[\n        [triangle.a.x, triangle.a.y],\n        [triangle.b.x, triangle.b.y],\n        [triangle.c.x, triangle.c.y],\n        [triangle.a.x, triangle.a.y]\n        ]], {\n            a: triangle.a.z,\n            b: triangle.b.z,\n            c: triangle.c.z\n        });\n    }));\n};\n\nfunction Triangle(a, b, c) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n\n    var A = b.x - a.x,\n        B = b.y - a.y,\n        C = c.x - a.x,\n        D = c.y - a.y,\n        E = A * (a.x + b.x) + B * (a.y + b.y),\n        F = C * (a.x + c.x) + D * (a.y + c.y),\n        G = 2 * (A * (c.y - b.y) - B * (c.x - b.x)),\n        minx, miny, dx, dy;\n\n    // If the points of the triangle are collinear, then just find the\n    // extremes and use the midpoint as the center of the circumcircle.\n    if (Math.abs(G) < 0.000001) {\n        minx = Math.min(a.x, b.x, c.x);\n        miny = Math.min(a.y, b.y, c.y);\n        dx = (Math.max(a.x, b.x, c.x) - minx) * 0.5;\n        dy = (Math.max(a.y, b.y, c.y) - miny) * 0.5;\n\n        this.x = minx + dx;\n        this.y = miny + dy;\n        this.r = dx * dx + dy * dy;\n    } else {\n        this.x = (D * E - B * F) / G;\n        this.y = (A * F - C * E) / G;\n        dx = this.x - a.x;\n        dy = this.y - a.y;\n        this.r = dx * dx + dy * dy;\n    }\n}\n\nfunction byX(a, b) {\n    return b.x - a.x;\n}\n\nfunction dedup(edges) {\n    var j = edges.length,\n        a, b, i, m, n;\n\n    outer:\n  while (j) {\n      b = edges[--j];\n      a = edges[--j];\n      i = j;\n      while (i) {\n          n = edges[--i];\n          m = edges[--i];\n          if ((a === m && b === n) || (a === n && b === m)) {\n              edges.splice(j, 2);\n              edges.splice(i, 2);\n              j -= 2;\n              continue outer;\n          }\n      }\n  }\n}\n\nfunction triangulate(vertices) {\n    // Bail if there aren't enough vertices to form any triangles.\n    if (vertices.length < 3)\n        return [];\n\n    // Ensure the vertex array is in order of descending X coordinate\n    // (which is needed to ensure a subquadratic runtime), and then find\n    // the bounding box around the points.\n    vertices.sort(byX);\n\n    var i = vertices.length - 1,\n        xmin = vertices[i].x,\n        xmax = vertices[0].x,\n        ymin = vertices[i].y,\n        ymax = ymin;\n\n    while (i--) {\n        if (vertices[i].y < ymin)\n            ymin = vertices[i].y;\n        if (vertices[i].y > ymax)\n            ymax = vertices[i].y;\n    }\n\n    //Find a supertriangle, which is a triangle that surrounds all the\n    //vertices. This is used like something of a sentinel value to remove\n    //cases in the main algorithm, and is removed before we return any\n    // results.\n\n    // Once found, put it in the \"open\" list. (The \"open\" list is for\n    // triangles who may still need to be considered; the \"closed\" list is\n    // for triangles which do not.)\n    var dx = xmax - xmin,\n        dy = ymax - ymin,\n        dmax = (dx > dy) ? dx : dy,\n        xmid = (xmax + xmin) * 0.5,\n        ymid = (ymax + ymin) * 0.5,\n        open = [\n            new Triangle({\n                x: xmid - 20 * dmax,\n                y: ymid - dmax,\n                __sentinel: true\n            }, {\n                x: xmid,\n                y: ymid + 20 * dmax,\n                __sentinel: true\n            }, {\n                x: xmid + 20 * dmax,\n                y: ymid - dmax,\n                __sentinel: true\n            }\n        )],\n        closed = [],\n        edges = [],\n        j, a, b;\n\n    // Incrementally add each vertex to the mesh.\n    i = vertices.length;\n    while (i--) {\n        // For each open triangle, check to see if the current point is\n        // inside it's circumcircle. If it is, remove the triangle and add\n        // it's edges to an edge list.\n        edges.length = 0;\n        j = open.length;\n        while (j--) {\n            // If this point is to the right of this triangle's circumcircle,\n            // then this triangle should never get checked again. Remove it\n            // from the open list, add it to the closed list, and skip.\n            dx = vertices[i].x - open[j].x;\n            if (dx > 0 && dx * dx > open[j].r) {\n                closed.push(open[j]);\n                open.splice(j, 1);\n                continue;\n            }\n\n            // If not, skip this triangle.\n            dy = vertices[i].y - open[j].y;\n            if (dx * dx + dy * dy > open[j].r)\n                continue;\n\n            // Remove the triangle and add it's edges to the edge list.\n            edges.push(\n        open[j].a, open[j].b,\n        open[j].b, open[j].c,\n        open[j].c, open[j].a\n      );\n            open.splice(j, 1);\n        }\n\n        // Remove any doubled edges.\n        dedup(edges);\n\n        // Add a new triangle for each edge.\n        j = edges.length;\n        while (j) {\n            b = edges[--j];\n            a = edges[--j];\n            open.push(new Triangle(a, b, vertices[i]));\n        }\n    }\n\n    // Copy any remaining open triangles to the closed list, and then\n    // remove any triangles that share a vertex with the supertriangle.\n    Array.prototype.push.apply(closed, open);\n\n    i = closed.length;\n    while (i--)\n        if (closed[i].a.__sentinel ||\n      closed[i].b.__sentinel ||\n      closed[i].c.__sentinel)\n            closed.splice(i, 1);\n\n    return closed;\n}\n"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/turf-tin/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":131,"column":0},"generated":{"line":131,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":132,"column":0},"generated":{"line":132,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":133,"column":0},"generated":{"line":133,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":134,"column":0},"generated":{"line":134,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":135,"column":0},"generated":{"line":135,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":136,"column":0},"generated":{"line":136,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":137,"column":0},"generated":{"line":137,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":138,"column":0},"generated":{"line":138,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":139,"column":0},"generated":{"line":139,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":140,"column":0},"generated":{"line":140,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":141,"column":0},"generated":{"line":141,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":142,"column":0},"generated":{"line":142,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":143,"column":0},"generated":{"line":143,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":144,"column":0},"generated":{"line":144,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":145,"column":0},"generated":{"line":145,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":146,"column":0},"generated":{"line":146,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":147,"column":0},"generated":{"line":147,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":148,"column":0},"generated":{"line":148,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":149,"column":0},"generated":{"line":149,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":150,"column":0},"generated":{"line":150,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":151,"column":0},"generated":{"line":151,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":152,"column":0},"generated":{"line":152,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":153,"column":0},"generated":{"line":153,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":154,"column":0},"generated":{"line":154,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":155,"column":0},"generated":{"line":155,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":156,"column":0},"generated":{"line":156,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":157,"column":0},"generated":{"line":157,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":158,"column":0},"generated":{"line":158,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":159,"column":0},"generated":{"line":159,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":160,"column":0},"generated":{"line":160,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":161,"column":0},"generated":{"line":161,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":162,"column":0},"generated":{"line":162,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":163,"column":0},"generated":{"line":163,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":164,"column":0},"generated":{"line":164,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":165,"column":0},"generated":{"line":165,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":166,"column":0},"generated":{"line":166,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":167,"column":0},"generated":{"line":167,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":168,"column":0},"generated":{"line":168,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":169,"column":0},"generated":{"line":169,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":170,"column":0},"generated":{"line":170,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":171,"column":0},"generated":{"line":171,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":172,"column":0},"generated":{"line":172,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":173,"column":0},"generated":{"line":173,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":174,"column":0},"generated":{"line":174,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":175,"column":0},"generated":{"line":175,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":176,"column":0},"generated":{"line":176,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":177,"column":0},"generated":{"line":177,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":178,"column":0},"generated":{"line":178,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":179,"column":0},"generated":{"line":179,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":180,"column":0},"generated":{"line":180,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":181,"column":0},"generated":{"line":181,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":182,"column":0},"generated":{"line":182,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":183,"column":0},"generated":{"line":183,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":184,"column":0},"generated":{"line":184,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":185,"column":0},"generated":{"line":185,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":186,"column":0},"generated":{"line":186,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":187,"column":0},"generated":{"line":187,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":188,"column":0},"generated":{"line":188,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":189,"column":0},"generated":{"line":189,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":190,"column":0},"generated":{"line":190,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":191,"column":0},"generated":{"line":191,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":192,"column":0},"generated":{"line":192,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":193,"column":0},"generated":{"line":193,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":194,"column":0},"generated":{"line":194,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":195,"column":0},"generated":{"line":195,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":196,"column":0},"generated":{"line":196,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":197,"column":0},"generated":{"line":197,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":198,"column":0},"generated":{"line":198,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":199,"column":0},"generated":{"line":199,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":200,"column":0},"generated":{"line":200,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":201,"column":0},"generated":{"line":201,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":202,"column":0},"generated":{"line":202,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":203,"column":0},"generated":{"line":203,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":204,"column":0},"generated":{"line":204,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":205,"column":0},"generated":{"line":205,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":206,"column":0},"generated":{"line":206,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":207,"column":0},"generated":{"line":207,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":208,"column":0},"generated":{"line":208,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":209,"column":0},"generated":{"line":209,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":210,"column":0},"generated":{"line":210,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":211,"column":0},"generated":{"line":211,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":212,"column":0},"generated":{"line":212,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":213,"column":0},"generated":{"line":213,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":214,"column":0},"generated":{"line":214,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":215,"column":0},"generated":{"line":215,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":216,"column":0},"generated":{"line":216,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":217,"column":0},"generated":{"line":217,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":218,"column":0},"generated":{"line":218,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":219,"column":0},"generated":{"line":219,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":220,"column":0},"generated":{"line":220,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":221,"column":0},"generated":{"line":221,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":222,"column":0},"generated":{"line":222,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":223,"column":0},"generated":{"line":223,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":224,"column":0},"generated":{"line":224,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":225,"column":0},"generated":{"line":225,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":226,"column":0},"generated":{"line":226,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":227,"column":0},"generated":{"line":227,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":228,"column":0},"generated":{"line":228,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":229,"column":0},"generated":{"line":229,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":230,"column":0},"generated":{"line":230,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":231,"column":0},"generated":{"line":231,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":232,"column":0},"generated":{"line":232,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":233,"column":0},"generated":{"line":233,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":234,"column":0},"generated":{"line":234,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":235,"column":0},"generated":{"line":235,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":236,"column":0},"generated":{"line":236,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":237,"column":0},"generated":{"line":237,"column":0}},{"source":"node_modules/turf-tin/index.js","original":{"line":238,"column":0},"generated":{"line":238,"column":0}}],"sources":{"node_modules/turf-tin/index.js":"//http://en.wikipedia.org/wiki/Delaunay_triangulation\n//https://github.com/ironwallaby/delaunay\nvar polygon = require('turf-helpers').polygon;\nvar featurecollection = require('turf-helpers').featureCollection;\n\n/**\n * Takes a set of {@link Point|points} and the name of a z-value property and\n * creates a [Triangulated Irregular Network](http://en.wikipedia.org/wiki/Triangulated_irregular_network),\n * or a TIN for short, returned as a collection of Polygons. These are often used\n * for developing elevation contour maps or stepped heat visualizations.\n *\n * This triangulates the points, as well as adds properties called `a`, `b`,\n * and `c` representing the value of the given `propertyName` at each of\n * the points that represent the corners of the triangle.\n *\n * @name tin\n * @param {FeatureCollection<Point>} points input points\n * @param {String=} z name of the property from which to pull z values\n * This is optional: if not given, then there will be no extra data added to the derived triangles.\n * @return {FeatureCollection<Polygon>} TIN output\n * @example\n * // generate some random point data\n * var points = turf.random('points', 30, {\n *   bbox: [50, 30, 70, 50]\n * });\n * //=points\n * // add a random property to each point between 0 and 9\n * for (var i = 0; i < points.features.length; i++) {\n *   points.features[i].properties.z = ~~(Math.random() * 9);\n * }\n * var tin = turf.tin(points, 'z')\n * for (var i = 0; i < tin.features.length; i++) {\n *   var properties  = tin.features[i].properties;\n *   // roughly turn the properties of each\n *   // triangle into a fill color\n *   // so we can visualize the result\n *   properties.fill = '#' + properties.a +\n *     properties.b + properties.c;\n * }\n * //=tin\n */\nmodule.exports = function (points, z) {\n    //break down points\n    return featurecollection(triangulate(points.features.map(function (p) {\n        var point = {\n            x: p.geometry.coordinates[0],\n            y: p.geometry.coordinates[1]\n        };\n        if (z) point.z = p.properties[z];\n        return point;\n    })).map(function (triangle) {\n        return polygon([[\n        [triangle.a.x, triangle.a.y],\n        [triangle.b.x, triangle.b.y],\n        [triangle.c.x, triangle.c.y],\n        [triangle.a.x, triangle.a.y]\n        ]], {\n            a: triangle.a.z,\n            b: triangle.b.z,\n            c: triangle.c.z\n        });\n    }));\n};\n\nfunction Triangle(a, b, c) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n\n    var A = b.x - a.x,\n        B = b.y - a.y,\n        C = c.x - a.x,\n        D = c.y - a.y,\n        E = A * (a.x + b.x) + B * (a.y + b.y),\n        F = C * (a.x + c.x) + D * (a.y + c.y),\n        G = 2 * (A * (c.y - b.y) - B * (c.x - b.x)),\n        minx, miny, dx, dy;\n\n    // If the points of the triangle are collinear, then just find the\n    // extremes and use the midpoint as the center of the circumcircle.\n    if (Math.abs(G) < 0.000001) {\n        minx = Math.min(a.x, b.x, c.x);\n        miny = Math.min(a.y, b.y, c.y);\n        dx = (Math.max(a.x, b.x, c.x) - minx) * 0.5;\n        dy = (Math.max(a.y, b.y, c.y) - miny) * 0.5;\n\n        this.x = minx + dx;\n        this.y = miny + dy;\n        this.r = dx * dx + dy * dy;\n    } else {\n        this.x = (D * E - B * F) / G;\n        this.y = (A * F - C * E) / G;\n        dx = this.x - a.x;\n        dy = this.y - a.y;\n        this.r = dx * dx + dy * dy;\n    }\n}\n\nfunction byX(a, b) {\n    return b.x - a.x;\n}\n\nfunction dedup(edges) {\n    var j = edges.length,\n        a, b, i, m, n;\n\n    outer:\n  while (j) {\n      b = edges[--j];\n      a = edges[--j];\n      i = j;\n      while (i) {\n          n = edges[--i];\n          m = edges[--i];\n          if ((a === m && b === n) || (a === n && b === m)) {\n              edges.splice(j, 2);\n              edges.splice(i, 2);\n              j -= 2;\n              continue outer;\n          }\n      }\n  }\n}\n\nfunction triangulate(vertices) {\n    // Bail if there aren't enough vertices to form any triangles.\n    if (vertices.length < 3)\n        return [];\n\n    // Ensure the vertex array is in order of descending X coordinate\n    // (which is needed to ensure a subquadratic runtime), and then find\n    // the bounding box around the points.\n    vertices.sort(byX);\n\n    var i = vertices.length - 1,\n        xmin = vertices[i].x,\n        xmax = vertices[0].x,\n        ymin = vertices[i].y,\n        ymax = ymin;\n\n    while (i--) {\n        if (vertices[i].y < ymin)\n            ymin = vertices[i].y;\n        if (vertices[i].y > ymax)\n            ymax = vertices[i].y;\n    }\n\n    //Find a supertriangle, which is a triangle that surrounds all the\n    //vertices. This is used like something of a sentinel value to remove\n    //cases in the main algorithm, and is removed before we return any\n    // results.\n\n    // Once found, put it in the \"open\" list. (The \"open\" list is for\n    // triangles who may still need to be considered; the \"closed\" list is\n    // for triangles which do not.)\n    var dx = xmax - xmin,\n        dy = ymax - ymin,\n        dmax = (dx > dy) ? dx : dy,\n        xmid = (xmax + xmin) * 0.5,\n        ymid = (ymax + ymin) * 0.5,\n        open = [\n            new Triangle({\n                x: xmid - 20 * dmax,\n                y: ymid - dmax,\n                __sentinel: true\n            }, {\n                x: xmid,\n                y: ymid + 20 * dmax,\n                __sentinel: true\n            }, {\n                x: xmid + 20 * dmax,\n                y: ymid - dmax,\n                __sentinel: true\n            }\n        )],\n        closed = [],\n        edges = [],\n        j, a, b;\n\n    // Incrementally add each vertex to the mesh.\n    i = vertices.length;\n    while (i--) {\n        // For each open triangle, check to see if the current point is\n        // inside it's circumcircle. If it is, remove the triangle and add\n        // it's edges to an edge list.\n        edges.length = 0;\n        j = open.length;\n        while (j--) {\n            // If this point is to the right of this triangle's circumcircle,\n            // then this triangle should never get checked again. Remove it\n            // from the open list, add it to the closed list, and skip.\n            dx = vertices[i].x - open[j].x;\n            if (dx > 0 && dx * dx > open[j].r) {\n                closed.push(open[j]);\n                open.splice(j, 1);\n                continue;\n            }\n\n            // If not, skip this triangle.\n            dy = vertices[i].y - open[j].y;\n            if (dx * dx + dy * dy > open[j].r)\n                continue;\n\n            // Remove the triangle and add it's edges to the edge list.\n            edges.push(\n        open[j].a, open[j].b,\n        open[j].b, open[j].c,\n        open[j].c, open[j].a\n      );\n            open.splice(j, 1);\n        }\n\n        // Remove any doubled edges.\n        dedup(edges);\n\n        // Add a new triangle for each edge.\n        j = edges.length;\n        while (j) {\n            b = edges[--j];\n            a = edges[--j];\n            open.push(new Triangle(a, b, vertices[i]));\n        }\n    }\n\n    // Copy any remaining open triangles to the closed list, and then\n    // remove any triangles that share a vertex with the supertriangle.\n    Array.prototype.push.apply(closed, open);\n\n    i = closed.length;\n    while (i--)\n        if (closed[i].a.__sentinel ||\n      closed[i].b.__sentinel ||\n      closed[i].c.__sentinel)\n            closed.splice(i, 1);\n\n    return closed;\n}\n"},"lineCount":238}},"error":null,"hash":"94e948ece07ec6b4cf5d99a54b5e30c2","cacheData":{"env":{}}}